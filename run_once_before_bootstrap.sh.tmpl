#!/bin/bash
set -euo pipefail

# This script runs once before applying dotfiles to bootstrap the system
echo "ğŸš€ Running bootstrap script..."

# Get the directory where this script is located (chezmoi source directory)
SCRIPT_DIR="{{ .chezmoi.sourceDir }}"

{{ if eq .chezmoi.os "darwin" -}}
# macOS
echo "ğŸ Detected macOS - running macOS bootstrap..."
bash "$SCRIPT_DIR/bootstrap/macos.sh"
{{ else if eq .chezmoi.os "linux" -}}
# Linux
echo "ğŸ§ Detected Linux - running Linux bootstrap..."
bash "$SCRIPT_DIR/bootstrap/linux.sh"
{{ else -}}
# Unsupported OS
echo "âŒ Unsupported operating system: {{ .chezmoi.os }}"
exit 1
{{ end -}}

echo "âœ… Bootstrap completed successfully!"
